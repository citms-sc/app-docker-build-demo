import{a as n,b as T}from"./utils-D7U1D1oO.js";import{r as v,e as B,o as z,c as A,a as V,u as f,k as c,w as F,b as y}from"./index-Db60hw1j.js";const I={__name:"vanDatetimePicker",props:{modelValue:{type:String},rules:{type:Object},label:String,name:String,placeholder:String,required:{type:Boolean,default:!1},format:{type:String,default:""}},emits:["update:modelValue"],setup(U,{emit:j}){const o=U,b=j;let l=v(""),i=B({get:()=>o.modelValue,set:e=>b("update:modelValue",e)}),h=v(n(2014,2025,"年")),k=v(n(1,12,"月")),m=v(n(1,31,"日")),M=v(n(0,24,"时")),N=v(n(0,60,"分")),P=B(()=>o.format?[h.value,k.value,m.value]:[h.value,k.value,m.value,M.value,N.value]),r=v(!1),t=v();const D=()=>{if(r.value=!0,o.modelValue=="")t.value=T();else{let e=o.modelValue.match(/\d+/g);t.value=e.map(a=>+a)}},E=({selectedOptions:e})=>{var s,p,d,u,C,$,w,_,L,S,q,x;for(let g=0;g<=4;g++)l.value=l.value+((s=e[g])==null?void 0:s.value);console.log(l.value);let a="213";a=a.replace("2","3"),o.format!==""?(l.value=o.format.replace("yyyy",`${(p=e[0])==null?void 0:p.value}`),l.value=l.value.replace("MM",`${(d=e[1])==null?void 0:d.value}`),l.value=l.value.replace("dd",`${(u=e[2])==null?void 0:u.value}`),l.value=l.value.replace("hh",`${(C=e[3])==null?void 0:C.value}`),l.value=l.value.replace("mm",`${($=e[4])==null?void 0:$.value}`),l.value=l.value.replace("ss",`${(w=e[5])==null?void 0:w.value}`)):l.value=`${(_=e[0])==null?void 0:_.value}-${(L=e[1])==null?void 0:L.value}-${(S=e[2])==null?void 0:S.value} ${(q=e[3])==null?void 0:q.value}:${(x=e[4])==null?void 0:x.value}:00`,console.log(l.value),b("update:modelValue",l.value),r.value=!1},R=()=>{if(t.value[0]%4===0&&t.value[1]===2){m.value=n(1,29,"日");return}[1,3,5,7,8,10,11].includes(t.value[1])?m.value=n(1,31,"日"):t.value[1]!==2?m.value=n(1,30,"日"):m.value=n(1,28,"日")};return(e,a)=>{const s=y("van-field"),p=y("van-picker"),d=y("van-popup");return z(),A("div",null,[V(s,{modelValue:f(i),"onUpdate:modelValue":a[0]||(a[0]=u=>c(i)?i.value=u:i=u),label:o.label,name:o.name,placeholder:o.placeholder,required:o.required,"is-link":"",readonly:"",onClick:D},null,8,["modelValue","label","name","placeholder","required"]),V(d,{show:f(r),"onUpdate:show":a[3]||(a[3]=u=>c(r)?r.value=u:r=u),"get-container":"body",position:"bottom",round:""},{default:F(()=>[V(p,{ref:"picker",modelValue:f(t),"onUpdate:modelValue":a[1]||(a[1]=u=>c(t)?t.value=u:t=u),columns:f(P),"show-toolbar":"",title:"请选择时间",onCancel:a[2]||(a[2]=u=>c(r)?r.value=!1:r=!1),onChange:R,onConfirm:E},null,8,["modelValue","columns"])]),_:1},8,["show"])])}}};export{I as default};
